



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for pantograph tools">
      
      
        <link rel="canonical" href="https://johnknapprs.github.io/pantograph/advanced/actions/">
      
      
        <meta name="author" content="pantograph team">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.5.1">
    
    
      
        <title>Actions - pantograph docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#00bcd4">
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="cyan" data-md-color-accent="blue-grey">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#actions" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://johnknapprs.github.io/pantograph/" title="pantograph docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              pantograph docs
            </span>
            <span class="md-header-nav__topic">
              
                Actions
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/johnknapprs/docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://johnknapprs.github.io/pantograph/" title="pantograph docs" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    pantograph docs
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/johnknapprs/docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../actions/" title="Actions" class="md-nav__link">
      Actions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Available Actions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Available Actions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/artifactory/" title="artifactory" class="md-nav__link">
      artifactory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/bundle_install/" title="bundle_install" class="md-nav__link">
      bundle_install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/changelog_from_git_commits/" title="changelog_from_git_commits" class="md-nav__link">
      changelog_from_git_commits
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/cloc/" title="cloc" class="md-nav__link">
      cloc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/create_pull_request/" title="create_pull_request" class="md-nav__link">
      create_pull_request
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/danger/" title="danger" class="md-nav__link">
      danger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/debug/" title="debug" class="md-nav__link">
      debug
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/default_platform/" title="default_platform" class="md-nav__link">
      default_platform
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/download/" title="download" class="md-nav__link">
      download
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/echo/" title="echo" class="md-nav__link">
      echo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/ensure_bundle_exec/" title="ensure_bundle_exec" class="md-nav__link">
      ensure_bundle_exec
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/ensure_env_vars/" title="ensure_env_vars" class="md-nav__link">
      ensure_env_vars
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/ensure_git_branch/" title="ensure_git_branch" class="md-nav__link">
      ensure_git_branch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/ensure_git_status_clean/" title="ensure_git_status_clean" class="md-nav__link">
      ensure_git_status_clean
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/erb/" title="erb" class="md-nav__link">
      erb
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/get_github_release/" title="get_github_release" class="md-nav__link">
      get_github_release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/git_add/" title="git_add" class="md-nav__link">
      git_add
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/git_branch/" title="git_branch" class="md-nav__link">
      git_branch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/git_commit/" title="git_commit" class="md-nav__link">
      git_commit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/git_pull/" title="git_pull" class="md-nav__link">
      git_pull
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/git_submodule_update/" title="git_submodule_update" class="md-nav__link">
      git_submodule_update
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/git_tag_exists/" title="git_tag_exists" class="md-nav__link">
      git_tag_exists
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/github_api/" title="github_api" class="md-nav__link">
      github_api
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/gradle/" title="gradle" class="md-nav__link">
      gradle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/import/" title="import" class="md-nav__link">
      import
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/import_from_git/" title="import_from_git" class="md-nav__link">
      import_from_git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/is_ci/" title="is_ci" class="md-nav__link">
      is_ci
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/jira/" title="jira" class="md-nav__link">
      jira
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/lane_context/" title="lane_context" class="md-nav__link">
      lane_context
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/last_git_commit/" title="last_git_commit" class="md-nav__link">
      last_git_commit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/make_changelog_from_jenkins/" title="make_changelog_from_jenkins" class="md-nav__link">
      make_changelog_from_jenkins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/min_pantograph_version/" title="min_pantograph_version" class="md-nav__link">
      min_pantograph_version
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/nexus_upload/" title="nexus_upload" class="md-nav__link">
      nexus_upload
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/number_of_commits/" title="number_of_commits" class="md-nav__link">
      number_of_commits
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/opt_out_usage/" title="opt_out_usage" class="md-nav__link">
      opt_out_usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/pantograph_version/" title="pantograph_version" class="md-nav__link">
      pantograph_version
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/println/" title="println" class="md-nav__link">
      println
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/prompt/" title="prompt" class="md-nav__link">
      prompt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/push_git_tags/" title="push_git_tags" class="md-nav__link">
      push_git_tags
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/push_to_git_remote/" title="push_to_git_remote" class="md-nav__link">
      push_to_git_remote
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/puts/" title="puts" class="md-nav__link">
      puts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/reset_git_repo/" title="reset_git_repo" class="md-nav__link">
      reset_git_repo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/rocket/" title="rocket" class="md-nav__link">
      rocket
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/rsync/" title="rsync" class="md-nav__link">
      rsync
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/ruby_version/" title="ruby_version" class="md-nav__link">
      ruby_version
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/say/" title="say" class="md-nav__link">
      say
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/set_github_release/" title="set_github_release" class="md-nav__link">
      set_github_release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/sh/" title="sh" class="md-nav__link">
      sh
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/skip_docs/" title="skip_docs" class="md-nav__link">
      skip_docs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/slack/" title="slack" class="md-nav__link">
      slack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/sonar/" title="sonar" class="md-nav__link">
      sonar
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/ssh/" title="ssh" class="md-nav__link">
      ssh
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/twitter/" title="twitter" class="md-nav__link">
      twitter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/update_pantograph/" title="update_pantograph" class="md-nav__link">
      update_pantograph
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../actions/zip/" title="zip" class="md-nav__link">
      zip
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../create-action/" title="Create Your Own Action" class="md-nav__link">
      Create Your Own Action
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../faqs/" title="FAQs" class="md-nav__link">
      FAQs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Plugins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Plugins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/available-plugins/" title="Available Plugins" class="md-nav__link">
      Available Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/using-plugins/" title="Use Plugins" class="md-nav__link">
      Use Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/create-plugin/" title="Create Your Own Plugin" class="md-nav__link">
      Create Your Own Plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/plugins-troubleshooting/" title="Plugins Troubleshooting" class="md-nav__link">
      Plugins Troubleshooting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Best Practices
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Best Practices
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../best-practices/source-control/" title="Source Control" class="md-nav__link">
      Source Control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../best-practices/continuous-integration/" title="Continuous Integration" class="md-nav__link">
      Continuous Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-3" type="checkbox" id="nav-7-3">
    
    <label class="md-nav__link" for="nav-7-3">
      CI Integrations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-3">
        CI Integrations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../best-practices/continuous-integration/jenkins/" title="Jenkins Integration" class="md-nav__link">
      Jenkins Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../best-practices/continuous-integration/circle-ci/" title="CircleCI Integration" class="md-nav__link">
      CircleCI Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../best-practices/continuous-integration/travis/" title="Travis Integration" class="md-nav__link">
      Travis Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../best-practices/continuous-integration/bamboo/" title="Bamboo Integration" class="md-nav__link">
      Bamboo Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../best-practices/continuous-integration/gitlab/" title="GitLab CI Integration" class="md-nav__link">
      GitLab CI Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../best-practices/continuous-integration/azure-devops/" title="Azure DevOps Integration" class="md-nav__link">
      Azure DevOps Integration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../best-practices/keys/" title="Keys" class="md-nav__link">
      Keys
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Advanced
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../pantograph/" title="pantograph" class="md-nav__link">
      pantograph
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Pantfile/" title="Pantfile" class="md-nav__link">
      Pantfile
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lanes/" title="Lanes" class="md-nav__link">
      Lanes
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="Actions" class="md-nav__link md-nav__link--active">
      Actions
    </a>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../other/" title="Other" class="md-nav__link">
      Other
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Deprecated
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Deprecated
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Advanced" class="md-nav__link">
      Advanced
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/johnknapprs/docs/edit/master/docs/advanced/actions.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <style type="text/css">
  .pantograph-setup {
    border-left: .4rem solid #00b0ff;
    border-bottom: .1rem solid rgba(0,176,255,.1);
    background-color: rgba(0,176,255,.1);
    padding: 15px;
    margin-bottom: 20px;
    font-weight: 200;
  }
  .pantograph-setup-wrapper {
    background-color: rgba(0,176,255,.05);
  }
  .pantograph-setup-wrapper[open] {
    padding-bottom: 1px;
  }
  .pantograph-setup-header {
    font-size: 20px;
    font-weight: 500;
  }
  .pantograph-setup-more-details {
    font-size: 18px;
    font-weight: 350;
  }
</style>

<details class="pantograph-setup-wrapper">
  <summary class="pantograph-setup">New to pantograph? Click here to open the installation & setup instructions first</summary>

<p class="pantograph-setup-header">1) Install the latest Xcode command line tools</p>


<div class="codehilite"><pre><span></span><span class="err">xcode-select --install</span>
</pre></div>



<p class="pantograph-setup-header">2) Install <i>pantograph</i></p>


<div class="codehilite"><pre><span></span><span class="c1"># Using RubyGems</span>
sudo gem install pantograph -NV

<span class="c1"># Alternatively using Homebrew</span>
brew cask install pantograph
</pre></div>



<p class="pantograph-setup-header">3) Navigate to your project and run</p>


<div class="codehilite"><pre><span></span><span class="err">pantograph init</span>
</pre></div>



<p class="pantograph-setup-more-details"><a href="/getting-started/ios/setup/">More Details</a></p>

</details>

<h1 id="actions">Actions</h1>
<h1 id="interacting-with-the-user">Interacting with the user</h1>
<p>Instead of using <code>puts</code>, <code>raise</code> and <code>gets</code>, please use the helper class <code>UI</code> across all pantograph tools:</p>
<div class="codehilite"><pre><span></span><span class="no">UI</span><span class="o">.</span><span class="n">message</span> <span class="s2">&quot;Neutral message (usually white)&quot;</span>
<span class="no">UI</span><span class="o">.</span><span class="n">success</span> <span class="s2">&quot;Successfully finished processing (usually green)&quot;</span>
<span class="no">UI</span><span class="o">.</span><span class="n">error</span> <span class="s2">&quot;Wahaha, what&#39;s going on here! (usually red)&quot;</span>
<span class="no">UI</span><span class="o">.</span><span class="n">important</span> <span class="s2">&quot;Make sure to use Windows (usually yellow)&quot;</span>

<span class="no">UI</span><span class="o">.</span><span class="n">header</span> <span class="s2">&quot;Inputs&quot;</span> <span class="c1"># a big box</span>

<span class="nb">name</span> <span class="o">=</span> <span class="no">UI</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s2">&quot;What&#39;s your name? &quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="no">UI</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="s2">&quot;Are you &#39;</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&#39;?&quot;</span><span class="p">)</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">success</span> <span class="s2">&quot;Oh yeah&quot;</span>
<span class="k">else</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">error</span> <span class="s2">&quot;Wups, invalid&quot;</span>
<span class="k">end</span>

<span class="no">UI</span><span class="o">.</span><span class="n">password</span><span class="p">(</span><span class="s2">&quot;Your password please: &quot;</span><span class="p">)</span> <span class="c1"># password inputs are hidden</span>

<span class="c1">###### A &quot;Dropdown&quot; for the user</span>
<span class="n">project</span> <span class="o">=</span> <span class="no">UI</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;Select your project: &quot;</span><span class="p">,</span> <span class="o">[</span><span class="s2">&quot;Test Project&quot;</span><span class="p">,</span> <span class="s2">&quot;Test Workspace&quot;</span><span class="o">]</span><span class="p">)</span>

<span class="no">UI</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="s2">&quot;Okay </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">, you selected &#39;</span><span class="si">#{</span><span class="n">project</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

<span class="c1">###### To run a command use</span>
<span class="no">PantographCore</span><span class="o">::</span><span class="no">CommandExecutor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="ss">command</span><span class="p">:</span> <span class="s2">&quot;ls&quot;</span><span class="p">,</span>
                                    <span class="ss">print_all</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
                                        <span class="ss">error</span><span class="p">:</span> <span class="nb">proc</span> <span class="k">do</span> <span class="o">|</span><span class="n">error_output</span><span class="o">|</span>
                                          <span class="c1"># handle error here</span>
                                        <span class="k">end</span><span class="p">)</span>

<span class="c1">###### or if you just want to receive a simple value use this only if the command doesn&#39;t take long</span>
<span class="n">diff</span> <span class="o">=</span> <span class="no">Helper</span><span class="o">.</span><span class="n">backticks</span><span class="p">(</span><span class="s2">&quot;git diff&quot;</span><span class="p">)</span>

<span class="c1">###### pantograph &quot;crash&quot; because of a user error everything that is caused by the user and is not unexpected</span>
<span class="no">UI</span><span class="o">.</span><span class="n">user_error!</span><span class="p">(</span><span class="s2">&quot;You don&#39;t have a project in the current directory&quot;</span><span class="p">)</span>

<span class="c1">###### an actual crash when something unexpected happened</span>
<span class="no">UI</span><span class="o">.</span><span class="n">crash!</span><span class="p">(</span><span class="s2">&quot;Network timeout&quot;</span><span class="p">)</span>

<span class="c1">###### a deprecation message</span>
<span class="no">UI</span><span class="o">.</span><span class="n">deprecated</span><span class="p">(</span><span class="s2">&quot;The &#39;--key&#39; parameter is deprecated&quot;</span><span class="p">)</span>
</pre></div>


<h1 id="run-actions-directly">Run actions directly</h1>
<p>If you just want to try an action without adding them to your <code>Pantfile</code> yet, you can use</p>
<div class="codehilite"><pre><span></span><span class="err">pantograph run notification message:&quot;My Text&quot; title:&quot;The Title&quot;</span>
</pre></div>


<p>To get the available options for any action run <code>pantograph action [action_name]</code>. You might not be able to set some kind of parameters using this method.</p>
<h1 id="shell-values">Shell values</h1>
<p>You can get value from shell commands:</p>
<div class="codehilite"><pre><span></span><span class="n">output</span> <span class="o">=</span> <span class="n">sh</span><span class="p">(</span><span class="s2">&quot;pod update&quot;</span><span class="p">)</span>
</pre></div>


<h1 id="building-actions">Building Actions</h1>
<h2 id="using-pantographcoreconfiguration">Using PantographCore::Configuration</h2>
<p>Most actions accept one or more parameters to customize their behavior. Actions define their
parameters in an <code>available_options</code> method. This method returns an array of <code>PantographCore::ConfigItem</code>
objects to describe supported options. Each option is declared by creating a new
<code>ConfigItem</code>, e.g.:</p>
<div class="codehilite"><pre><span></span><span class="no">PantographCore</span><span class="o">::</span><span class="no">ConfigItem</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
  <span class="ss">key</span><span class="p">:</span> <span class="ss">:file</span><span class="p">,</span>
  <span class="ss">env_name</span><span class="p">:</span> <span class="s2">&quot;MY_NEW_ACTION_FILE&quot;</span><span class="p">,</span>
  <span class="ss">description</span><span class="p">:</span> <span class="s2">&quot;A file to operate on&quot;</span><span class="p">,</span>
  <span class="ss">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
  <span class="ss">optional</span><span class="p">:</span> <span class="kp">false</span>
<span class="p">)</span>
</pre></div>


<p>This declares a <code>file</code> option for use with the action in a Pantfile, e.g.:</p>
<div class="codehilite"><pre><span></span><span class="n">my_new_action</span><span class="p">(</span><span class="ss">file</span><span class="p">:</span> <span class="s2">&quot;file.txt&quot;</span><span class="p">)</span>
</pre></div>


<p>If the optional <code>env_name</code> is present, an environment variable with the specified
name may also be used in place of an option in the Pantfile:</p>
<div class="codehilite"><pre><span></span><span class="nv">MY_NEW_ACTION_FILE</span><span class="o">=</span>file.txt pantograph run my_new_action
</pre></div>


<p>The <code>type</code> argument to the <code>PantographCore::ConfigItem</code> initializer specifies the
name of a Ruby class representing a standard
data type. Supplied arguments will be coerced to the specified type. Some standard types
support default conversions.</p>
<h3 id="boolean-parameters">Boolean parameters</h3>
<p>Ruby does not have a single class to represent a Boolean type. When specifying
Boolean parameters, use <code>is_string: false</code>, without specifying a <code>type</code>, e.g.:</p>
<div class="codehilite"><pre><span></span><span class="no">PantographCore</span><span class="o">::</span><span class="no">ConfigItem</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
  <span class="ss">key</span><span class="p">:</span> <span class="ss">:commit</span><span class="p">,</span>
  <span class="ss">env_name</span><span class="p">:</span> <span class="s2">&quot;MY_NEW_ACTION_COMMIT&quot;</span><span class="p">,</span>
  <span class="ss">description</span><span class="p">:</span> <span class="s2">&quot;Commit the results if true&quot;</span><span class="p">,</span>
  <span class="ss">optional</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="ss">default_value</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="ss">is_string</span><span class="p">:</span> <span class="kp">false</span>
<span class="p">)</span>
</pre></div>


<p>When passing a string value, e.g. from an environment variable, certain set
string values are recognized:</p>
<div class="codehilite"><pre><span></span><span class="nv">MY_NEW_ACTION_COMMIT</span><span class="o">=</span><span class="nb">true</span>
<span class="nv">MY_NEW_ACTION_COMMIT</span><span class="o">=</span><span class="nb">false</span>
<span class="nv">MY_NEW_ACTION_COMMIT</span><span class="o">=</span>yes
<span class="nv">MY_NEW_ACTION_COMMIT</span><span class="o">=</span>no
</pre></div>


<p>These values may also be passed in all caps, e.g. <code>MY_NEW_ACTION_COMMIT=YES</code>.</p>
<h3 id="array-parameters">Array parameters</h3>
<p>If a parameter is declared with <code>type: Array</code> and a <code>String</code> argument is passed,
an array will be produced by splitting the string using the comma character
as a delimiter:</p>
<div class="codehilite"><pre><span></span><span class="no">PantographCore</span><span class="o">::</span><span class="no">ConfigItem</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
  <span class="ss">key</span><span class="p">:</span> <span class="ss">:files</span><span class="p">,</span>
  <span class="ss">env_name</span><span class="p">:</span> <span class="s2">&quot;MY_NEW_ACTION_FILES&quot;</span><span class="p">,</span>
  <span class="ss">description</span><span class="p">:</span> <span class="s2">&quot;One or more files to operate on&quot;</span><span class="p">,</span>
  <span class="ss">type</span><span class="p">:</span> <span class="nb">Array</span><span class="p">,</span>
  <span class="ss">optional</span><span class="p">:</span> <span class="kp">false</span>
<span class="p">)</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">my_new_action</span><span class="p">(</span><span class="ss">files</span><span class="p">:</span> <span class="s2">&quot;file1.txt,file2.txt&quot;</span><span class="p">)</span>
</pre></div>


<p>This is received by the action as <code>["file1.txt", "file2.txt"]</code>.</p>
<p>This also means a parameter that accepts an array may take a single string as an
argument:</p>
<div class="codehilite"><pre><span></span><span class="n">my_new_action</span><span class="p">(</span><span class="ss">files</span><span class="p">:</span> <span class="s2">&quot;file.txt&quot;</span><span class="p">)</span>
</pre></div>


<p>This is received by the action as <code>["file.txt"]</code>.</p>
<p>Comma-separated lists are particularly useful when using environment variables:</p>
<div class="codehilite"><pre><span></span><span class="nb">export</span> <span class="nv">MY_NEW_ACTION_FILES</span><span class="o">=</span>file1.txt,file2.txt
</pre></div>


<h3 id="polymorphic-parameters">Polymorphic parameters</h3>
<p>To allow for different types to be passed to a parameter (beyond what is
provided above), specify <code>is_string: false</code> without a <code>type</code> field. Use
an optional <code>verify_block</code> argument (see below) or verify the argument within
your action. If the block does not raise, the option is considered verified.
The <code>UI.user_error!</code> method is a convenient way to handle verification failure.</p>
<div class="codehilite"><pre><span></span><span class="no">PantographCore</span><span class="o">::</span><span class="no">ConfigItem</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
  <span class="ss">key</span><span class="p">:</span> <span class="ss">:polymorphic_option</span><span class="p">,</span>
  <span class="ss">is_string</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="ss">verify_block</span><span class="p">:</span> <span class="o">-&gt;</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="n">verify_option</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">}</span>
<span class="p">)</span>

<span class="k">def</span> <span class="nf">verify_option</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
  <span class="k">case</span> <span class="n">value</span>
  <span class="k">when</span> <span class="nb">String</span>
    <span class="vi">@polymorphic_option</span> <span class="o">=</span> <span class="n">value</span>
  <span class="k">when</span> <span class="nb">Array</span>
    <span class="vi">@polymorphic_option</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
  <span class="k">when</span> <span class="no">Hash</span>
    <span class="vi">@polymorphic_option</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">to_s</span>
  <span class="k">else</span>
    <span class="no">UI</span><span class="o">.</span><span class="n">user_error!</span> <span class="s2">&quot;Invalid option: </span><span class="si">#{</span><span class="n">value</span><span class="o">.</span><span class="n">inspect</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>


<h3 id="callback-parameters">Callback parameters</h3>
<p>If your action needs to provide a callback, specify <code>Proc</code> for the <code>type</code> field.</p>
<div class="codehilite"><pre><span></span><span class="no">PantographCore</span><span class="o">::</span><span class="no">ConfigItem</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
  <span class="ss">key</span><span class="p">:</span> <span class="ss">:callback</span><span class="p">,</span>
  <span class="ss">description</span><span class="p">:</span> <span class="s2">&quot;Optional callback argument&quot;</span><span class="p">,</span>
  <span class="ss">optional</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="ss">type</span><span class="p">:</span> <span class="no">Proc</span>
<span class="p">)</span>
</pre></div>


<p>To invoke the callback in your action, use the <code>Proc#call</code> method and pass
any arguments:</p>
<div class="codehilite"><pre><span></span><span class="n">params</span><span class="o">[</span><span class="ss">:callback</span><span class="o">].</span><span class="n">call</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="k">if</span> <span class="n">params</span><span class="o">[</span><span class="ss">:callback</span><span class="o">]</span>
</pre></div>


<p>To notify the user of success or failure, it's usually best just to return a
value such as <code>true</code> or <code>false</code> from your action. Use a callback for contextual
error handling. For example, the built-in <code>sh</code> action passes the entire command
output to an optional <code>error_callback</code>:</p>
<div class="codehilite"><pre><span></span><span class="n">callback</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="k">do</span> <span class="o">|</span><span class="n">result</span><span class="o">|</span>
  <span class="n">handle_missing_file</span> <span class="k">if</span> <span class="n">result</span> <span class="o">=~</span> <span class="sr">/file not found/i</span>
  <span class="n">handle_auth_failure</span> <span class="k">if</span> <span class="n">result</span> <span class="o">=~</span> <span class="sr">/login failed/i</span>
<span class="k">end</span>

<span class="n">sh</span> <span class="s2">&quot;some_cmd&quot;</span><span class="p">,</span> <span class="ss">error_callback</span><span class="p">:</span> <span class="n">callback</span>
</pre></div>


<h3 id="note-on-procs">Note on Procs</h3>
<p>When passing a block as a parameter to an action or ConfigItem, use
a Proc object. There are three ways to create an instance of Proc in Ruby.</p>
<p>Using the <code>lambda</code> operator:</p>
<div class="codehilite"><pre><span></span><span class="n">verify_block</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="k">do</span> <span class="o">|</span><span class="n">value</span><span class="o">|</span>
  <span class="o">...</span>
<span class="k">end</span>
</pre></div>


<p>Using <code>Proc.new</code>:</p>
<div class="codehilite"><pre><span></span><span class="n">verify_block</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">value</span><span class="o">|</span>
  <span class="o">...</span>
<span class="k">end</span>
</pre></div>


<p>Using the <code>Proc</code> literal notation:</p>
<div class="codehilite"><pre><span></span><span class="n">verify_block</span> <span class="o">=</span> <span class="o">-&gt;</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>


<p>Note that you cannot pass a block literal as a <code>Proc</code>.</p>
<h3 id="verify-blocks">Verify blocks</h3>
<p>Use a <code>verify_block</code> argument with your <code>ConfigItem</code> to provide special
argument verification:</p>
<div class="codehilite"><pre><span></span><span class="n">verify_block</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="k">do</span> <span class="o">|</span><span class="n">value</span><span class="o">|</span>
  <span class="c1"># Has to be a String to get this far</span>
  <span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">error</span> <span class="s2">&quot;Invalid scheme </span><span class="si">#{</span><span class="n">uri</span><span class="o">.</span><span class="n">scheme</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">unless</span> <span class="n">uri</span><span class="o">.</span><span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;http&quot;</span> <span class="o">||</span> <span class="n">uri</span><span class="o">.</span><span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;https&quot;</span>
<span class="k">end</span>

<span class="no">PantographCore</span><span class="o">::</span><span class="no">ConfigItem</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
  <span class="ss">key</span><span class="p">:</span> <span class="ss">:url</span><span class="p">,</span>
  <span class="ss">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
  <span class="ss">verify_block</span><span class="p">:</span> <span class="n">verify_block</span>
<span class="p">)</span>
</pre></div>


<p>The <code>verify_block</code> requires a <code>Proc</code> argument (see above).</p>
<h3 id="conflicting-options">Conflicting options</h3>
<p>If your action includes multiple conflicting options, use <code>conflicting_options</code>
in the <code>ConfigItem</code> for each. Make sure conflicting options are optional.</p>
<div class="codehilite"><pre><span></span><span class="no">PantographCore</span><span class="o">::</span><span class="no">ConfigItem</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
  <span class="ss">key</span><span class="p">:</span> <span class="ss">:text</span><span class="p">,</span>
  <span class="ss">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
  <span class="ss">optional</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="ss">conflicting_options</span><span class="p">:</span> <span class="o">[</span><span class="ss">:text_file</span><span class="o">]</span>
<span class="p">),</span>
<span class="no">PantographCore</span><span class="o">::</span><span class="no">ConfigItem</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
  <span class="ss">key</span><span class="p">:</span> <span class="ss">:text_file</span><span class="p">,</span>
  <span class="ss">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
  <span class="ss">optional</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="ss">conflicting_options</span><span class="p">:</span> <span class="o">[</span><span class="ss">:text</span><span class="o">]</span>
<span class="p">)</span>
</pre></div>


<p>You can also pass a <code>conflict_block</code> (a <code>Proc</code>, see above) if you want to
implement special handling of conflicting options:</p>
<div class="codehilite"><pre><span></span><span class="n">conflict_block</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">other</span><span class="o">|</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">user_error!</span> <span class="s2">&quot;Unexpected conflict with option </span><span class="si">#{</span><span class="n">other</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">unless</span> <span class="o">[</span><span class="ss">:text</span><span class="p">,</span> <span class="ss">:text_file</span><span class="o">].</span><span class="n">include?</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">message</span> <span class="s2">&quot;Ignoring :text_file in favor of :text&quot;</span>
<span class="k">end</span>

<span class="no">PantographCore</span><span class="o">::</span><span class="no">ConfigItem</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
  <span class="ss">key</span><span class="p">:</span> <span class="ss">:text</span><span class="p">,</span>
  <span class="ss">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
  <span class="ss">optional</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="ss">conflicting_options</span><span class="p">:</span> <span class="o">[</span><span class="ss">:text_file</span><span class="o">]</span><span class="p">,</span>
  <span class="ss">conflict_block</span><span class="p">:</span> <span class="n">conflict_block</span>
<span class="p">),</span>
<span class="no">PantographCore</span><span class="o">::</span><span class="no">ConfigItem</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
  <span class="ss">key</span><span class="p">:</span> <span class="ss">:text_file</span><span class="p">,</span>
  <span class="ss">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
  <span class="ss">optional</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="ss">conflicting_options</span><span class="p">:</span> <span class="o">[</span><span class="ss">:text</span><span class="o">]</span><span class="p">,</span>
  <span class="ss">conflict_block</span><span class="p">:</span> <span class="n">conflict_block</span>
<span class="p">)</span>
</pre></div>


<h3 id="optional-parameters">Optional parameters</h3>
<p>Parameters with <code>optional: true</code> will be <code>nil</code> unless a <code>default_value</code> field
is present. Make sure the <code>default_value</code> is reasonable unless it's acceptable
for the key to be absent.</p>
<div class="codehilite"><pre><span></span><span class="no">PantographCore</span><span class="o">::</span><span class="no">ConfigItem</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
  <span class="ss">key</span><span class="p">:</span> <span class="ss">:build_configuration</span><span class="p">,</span>
  <span class="ss">description</span><span class="p">:</span> <span class="s2">&quot;Which build configuration to use&quot;</span><span class="p">,</span>
  <span class="ss">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
  <span class="ss">optional</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="ss">default_value</span><span class="p">:</span> <span class="s2">&quot;Release&quot;</span>
<span class="p">),</span>
<span class="no">PantographCore</span><span class="o">::</span><span class="no">ConfigItem</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
  <span class="ss">key</span><span class="p">:</span> <span class="ss">:offset</span><span class="p">,</span>
  <span class="ss">description</span><span class="p">:</span> <span class="s2">&quot;Offset to start from&quot;</span><span class="p">,</span>
  <span class="ss">type</span><span class="p">:</span> <span class="nb">Integer</span><span class="p">,</span>
  <span class="ss">optional</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="ss">default_value</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">),</span>
<span class="no">PantographCore</span><span class="o">::</span><span class="no">ConfigItem</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
  <span class="ss">key</span><span class="p">:</span> <span class="ss">:workspace</span><span class="p">,</span>
  <span class="ss">description</span><span class="p">:</span> <span class="s2">&quot;Optional workspace path&quot;</span><span class="p">,</span>
  <span class="ss">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
  <span class="ss">optional</span><span class="p">:</span> <span class="kp">true</span>
  <span class="c1"># Not every project has a workspace, so nil is a good default value here.</span>
<span class="p">)</span>
</pre></div>


<p>Within the action <code>params[:build_configuration]</code> will never be nil. Specifying
the <code>default_value</code> is preferable to something in code like:</p>
<div class="codehilite"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">params</span><span class="o">[</span><span class="ss">:build_configuration</span><span class="o">]</span> <span class="o">||</span> <span class="s2">&quot;Release&quot;</span>
</pre></div>


<p>Default values are included in the documentation for action parameters.</p>
<h3 id="configuration-files">Configuration files</h3>
<p>Many built-in actions such as <em>deliver</em>, <em>gym</em> and <em>scan</em> support configuration files
(<code>Deliverfile</code>, <code>Gymfile</code>, <code>Scanfile</code>). This is useful for actions with many options.
To add support for a configuration file to a custom action, call <code>load_configuration_file</code>
early, usually as the first line of <code>run</code>:</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">run</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
  <span class="n">params</span><span class="o">.</span><span class="n">load_configuration_file</span><span class="p">(</span><span class="s2">&quot;MyNewActionfile&quot;</span><span class="p">)</span>
  <span class="c1"># ...</span>
</pre></div>


<p>This will load any parameters specified in <code>MyNewActionfile</code>. This method looks for
the specified file in <code>./pantograph</code>, <code>./.pantograph</code> and <code>.</code>, in that order. The
file is evaluated by the Ruby interpreter.
You may specify they <code>key</code> from any <code>PantographCore::ConfigItem</code> as a method call in the
configuration file:</p>
<div class="codehilite"><pre><span></span><span class="n">command</span> <span class="s2">&quot;ls -la&quot;</span>
<span class="n">files</span> <span class="sx">%w{file1.txt file2.txt}</span>
</pre></div>


<h3 id="resolution-order">Resolution order</h3>
<p>Parameters are resolved from different sources in the following order:</p>
<ol>
<li>A parameter directly passed to an action using the <code>key</code>, usually from the <code>Pantfile</code>.</li>
<li>An environment variable, if the <code>env_name</code> is set.</li>
<li>A configuration file used in <code>load_configuration_file</code>.</li>
<li>The <code>default_value</code> of the <code>ConfigItem</code>. If not explicitly set, this will be <code>nil</code>.</li>
</ol>
<h2 id="user-input-and-output">User input and output</h2>
<p>The <code>PantographCore::UI</code> utility may be used to display output to the user and also
request input from an action.
<code>UI</code> includes a number of methods to customize the output for different purposes:</p>
<div class="codehilite"><pre><span></span><span class="no">UI</span><span class="o">.</span><span class="n">message</span> <span class="s2">&quot;Hello from my_new_action.&quot;</span>
<span class="no">UI</span><span class="o">.</span><span class="n">important</span> <span class="s2">&quot;Warning: This is a new action.&quot;</span>
<span class="no">UI</span><span class="o">.</span><span class="n">error</span> <span class="s2">&quot;Something unexpected happened in my_new_action. Attempting to continue.&quot;</span>
</pre></div>


<table>
<thead>
<tr>
<th>method</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>error</td>
<td>Displays an error message in red</td>
</tr>
<tr>
<td>important</td>
<td>Displays a warning or other important message in yellow</td>
</tr>
<tr>
<td>success</td>
<td>Displays a success message in green</td>
</tr>
<tr>
<td>message</td>
<td>Displays a message in the default output color</td>
</tr>
<tr>
<td>deprecated</td>
<td>Displays a deprecation message in bold blue</td>
</tr>
<tr>
<td>command</td>
<td>Displays a command being executed in cyan</td>
</tr>
<tr>
<td>command_output</td>
<td>Displays command output in magenta</td>
</tr>
<tr>
<td>verbose</td>
<td>Displays verbose output in the default output color</td>
</tr>
<tr>
<td>header</td>
<td>Displays a message in a box for emphasis</td>
</tr>
</tbody>
</table>
<p>Methods ending in an exclamation point (<code>!</code>) terminate execution of the current
lane and report an error:</p>
<div class="codehilite"><pre><span></span><span class="no">UI</span><span class="o">.</span><span class="n">user_error!</span> <span class="s2">&quot;Could not open file </span><span class="si">#{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>


<table>
<thead>
<tr>
<th>method</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>crash!</td>
<td>Report a catastrophic error</td>
</tr>
<tr>
<td>user_error!</td>
<td>Rescue an exception in your action and report a nice message to the user</td>
</tr>
<tr>
<td>shell_error!</td>
<td>Report failure of a shell command</td>
</tr>
<tr>
<td>build_failure!</td>
<td>Report a build failure</td>
</tr>
<tr>
<td>test_failure!</td>
<td>Report a test failure</td>
</tr>
<tr>
<td>abort_with_message!</td>
<td>Report a failure condition that prevents continuing</td>
</tr>
</tbody>
</table>
<p>Note that these methods raise exceptions that are rescued in the runner context for
the lane. This terminates further lane execution, so it is not necessary to return.</p>
<div class="codehilite"><pre><span></span><span class="c1"># No need for &quot;and return&quot; here</span>
<span class="no">UI</span><span class="o">.</span><span class="n">user_error!</span><span class="p">(</span><span class="s2">&quot;Could not open file </span><span class="si">#{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="k">return</span> <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">nil?</span>
</pre></div>


<p>The following methods may be used to prompt the user for input.</p>
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="no">UI</span><span class="o">.</span><span class="n">interactive?</span>
  <span class="nb">name</span> <span class="o">=</span> <span class="no">UI</span><span class="o">.</span><span class="n">input</span> <span class="s2">&quot;Please enter your name: &quot;</span>
  <span class="n">is_correct</span> <span class="o">=</span> <span class="no">UI</span><span class="o">.</span><span class="n">confirm</span> <span class="s2">&quot;Is this correct? &quot;</span>
  <span class="n">choice</span> <span class="o">=</span> <span class="no">UI</span><span class="o">.</span><span class="n">select</span> <span class="s2">&quot;Please choose from the following list:&quot;</span><span class="p">,</span> <span class="sx">%w{alpha beta gamma}</span>
  <span class="n">password</span> <span class="o">=</span> <span class="no">UI</span><span class="o">.</span><span class="n">password</span> <span class="s2">&quot;Please enter your password: &quot;</span>
<span class="k">end</span>
</pre></div>


<table>
<thead>
<tr>
<th>method</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>interactive?</td>
<td>Indicates whether interactive input is possible</td>
</tr>
<tr>
<td>input</td>
<td>Prompt the user for string input</td>
</tr>
<tr>
<td>confirm</td>
<td>Ask the user a binary question</td>
</tr>
<tr>
<td>select</td>
<td>Prompt the user to select from a list of options</td>
</tr>
<tr>
<td>password</td>
<td>Prompt the user for a password (masks output)</td>
</tr>
</tbody>
</table>
<h2 id="invoking-shell-commands">Invoking shell commands</h2>
<p>If your action needs to run a shell command, there are several methods. You can
easily determine the exit status of the command and capture all terminal output
from the command.</p>
<h3 id="using-kernelsystem">Using Kernel#system</h3>
<p>Use the Ruby <code>system</code> method call to invoke a command string. This does not
redirect stdin, stdout or stderr, so output formatting will be unaffected. It executes
the command in a subshell.</p>
<div class="codehilite"><pre><span></span><span class="nb">system</span> <span class="s2">&quot;cat pantograph/Pantfile&quot;</span>
</pre></div>


<p>Upon command completion, the method returns true or false to indicate completion
status. The <code>$?</code> global variable will also indicate the exit status of the
command.</p>
<div class="codehilite"><pre><span></span><span class="nb">system</span> <span class="s2">&quot;cat pantograph/Pantfile&quot;</span>
<span class="no">UI</span><span class="o">.</span><span class="n">user_error!</span> <span class="s2">&quot;Could not execute command&quot;</span> <span class="k">unless</span> <span class="vg">$?</span><span class="o">.</span><span class="n">exitstatus</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>


<p>If the command to be executed is not found, system will return <code>nil</code>, and
<code>$?.exitstatus</code> will be nonzero.</p>
<h3 id="using-backticks">Using backticks</h3>
<p>To capture the output of a command, enclose the command in backticks:</p>
<div class="codehilite"><pre><span></span><span class="n">pod_cmd</span> <span class="o">=</span> <span class="sb">`which pod`</span>
<span class="no">UI</span><span class="o">.</span><span class="n">important</span> <span class="s2">&quot;&#39;pod&#39; command not found&quot;</span> <span class="k">if</span> <span class="n">pod_cmd</span><span class="o">.</span><span class="n">empty?</span>
</pre></div>


<p>Because you are capturing stdout, the command output will not appear at
the terminal unless you log it using <code>UI</code>. Formatting may be lost when
capturing command output. The entire output to stdout will be captured after the
command returns. Output to stderr is not captured or redirected. The <code>$?</code>
global variable will indicate the completion status of the command.</p>
<p>If the command to be executed is not found, <code>Errno::ENOENT</code> is raised.</p>
<h3 id="using-the-sh-method">Using the sh method</h3>
<p>You can also use the built-in <code>sh</code> method:</p>
<div class="codehilite"><pre><span></span><span class="n">sh</span> <span class="s2">&quot;pwd&quot;</span>
</pre></div>


<p>This is called the same way in an action as in a Pantfile. This provides consistent
logging of command output. All output to stdout and stderr is logged via <code>UI</code>.</p>
<p>The <code>sh</code> method can accept a block, which will receive the <code>Process::Status</code>
returned by the command, the complete output of the command, and an equivalent
shell command upon completion of the command.</p>
<div class="codehilite"><pre><span></span><span class="n">sh</span> <span class="s2">&quot;ls&quot;</span><span class="p">,</span> <span class="s2">&quot;-la&quot;</span> <span class="k">do</span> <span class="o">|</span><span class="n">status</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">command</span><span class="o">|</span>
  <span class="k">unless</span> <span class="n">status</span><span class="o">.</span><span class="n">success?</span>
    <span class="no">UI</span><span class="o">.</span><span class="n">error</span> <span class="s2">&quot;Command </span><span class="si">#{</span><span class="n">command</span><span class="si">}</span><span class="s2"> (pid </span><span class="si">#{</span><span class="n">status</span><span class="o">.</span><span class="n">pid</span><span class="si">}</span><span class="s2">) failed with status </span><span class="si">#{</span><span class="n">status</span><span class="o">.</span><span class="n">exitstatus</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="k">end</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">message</span> <span class="s2">&quot;Output is </span><span class="si">#{</span><span class="n">result</span><span class="o">.</span><span class="n">inspect</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">end</span>
</pre></div>


<p>To be notified only when an error occurs, use the <code>error_callback</code> parameter
(a Proc):</p>
<div class="codehilite"><pre><span></span><span class="n">success</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">sh</span><span class="p">(</span><span class="s2">&quot;pwd&quot;</span><span class="p">,</span> <span class="ss">error_callback</span><span class="p">:</span> <span class="o">-&gt;</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span> <span class="n">success</span> <span class="o">=</span> <span class="kp">false</span> <span class="p">})</span>
<span class="no">UI</span><span class="o">.</span><span class="n">user_error</span> <span class="s2">&quot;Command failed&quot;</span> <span class="k">unless</span> <span class="n">success</span>
</pre></div>


<p>The <code>result</code> argument to the <code>error_callback</code> is the entire string output
of the command.</p>
<p>If the command to be executed is not found, <code>Errno::ENOENT</code> is raised without
calling the block or <code>error_callback</code>.</p>
<p>If an <code>error_callback</code> or block is not provided, and the command executes and
returns an error, an exception is raised, and lane execution is terminated
unless the exception is rescued. The exit status of the command will be available in <code>$?</code>. It is also available
as the first argument to a block.</p>
<p>The return value of the method is the output of the command, unless a block is
given. Then the output is available within the block, and the return value of
<code>sh</code> is the return value of the block. This enables usage like:</p>
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="n">sh</span> <span class="n">command</span> <span class="p">{</span> <span class="o">|</span><span class="n">s</span><span class="o">|</span> <span class="n">s</span><span class="o">.</span><span class="n">success?</span> <span class="p">}</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">success</span> <span class="s2">&quot;Command succeeded&quot;</span>
<span class="k">else</span>
  <span class="no">UI</span><span class="o">.</span><span class="n">error</span> <span class="s2">&quot;Command failed&quot;</span>
<span class="k">end</span>
</pre></div>


<p>Anywhere other than an action or a Pantfile (e.g. in helper code), you can
invoke this method as <code>Actions.sh</code>.</p>
<h3 id="escaping-in-shell-commands">Escaping in shell commands</h3>
<p>Use <code>shellwords</code> to escape arguments to shell commands.</p>
<div class="codehilite"><pre><span></span><span class="sb">`git commit -aqm </span><span class="si">#{</span><span class="no">Shellwords</span><span class="o">.</span><span class="n">escape</span> <span class="n">commit_message</span><span class="si">}</span><span class="sb">`</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="nb">system</span> <span class="s2">&quot;cat </span><span class="si">#{</span><span class="n">path</span><span class="o">.</span><span class="n">shellescape</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>


<p>When using <code>system</code> or <code>sh</code>, pass a list of arguments instead of shell-escaping
individual arguments.</p>
<div class="codehilite"><pre><span></span><span class="n">sh</span> <span class="s2">&quot;git&quot;</span><span class="p">,</span> <span class="s2">&quot;commit&quot;</span><span class="p">,</span> <span class="s2">&quot;-aqm&quot;</span><span class="p">,</span> <span class="n">commit_message</span>
<span class="nb">system</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="n">path</span>
</pre></div>


<h2 id="calling-other-actions">Calling other actions</h2>
<p>Some built-in utility actions, such as <code>sh</code>, may be used in custom actions (e.g., in
plugins). It's not generally a good idea to call a complex action from another action.
In particular:</p>
<ul>
<li>If you're calling one plugin action from another plugin action, you should
  probably refactor your plugin helper to be more easily called from all actions
  in the plugin.</li>
<li>Avoid wrapping complex built-in actions like <em>deliver</em> and <em>gym</em>.</li>
<li>There can be issues with one plugin depending on another plugin.</li>
<li>Certain simple built-in utility actions may be used with <code>other_action</code> in your
  action, such as: <code>other_action.git_add</code>, <code>other_action.git_commit</code>.</li>
<li>Think twice before calling an action from another action. There is often a better
  solution.</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../lanes/" title="Lanes" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Lanes
              </span>
            </div>
          </a>
        
        
          <a href="../other/" title="Other" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Other
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 <a href="https://pantograph.tools">pantograph</a>
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.8e03edeb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>